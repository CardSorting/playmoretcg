{% extends "base.html" %}

{% block title %}Open Pack - AI Card Creator{% endblock %}

{% block head %}
<style>
    .pack-animation {
        perspective: 1000px;
        transform-style: preserve-3d;
        transition: transform 0.6s;
    }

    .pack-image {
        width: 300px;
        height: 420px;
        margin: 0 auto;
        background-color: #2563eb;
        background-image: url('/static/pack.png');
        background-size: cover;
        background-position: center;
        border-radius: 15px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        transition: transform 0.3s ease;
    }

    .pack-image:hover {
        transform: scale(1.05);
    }

    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px) rotate(-5deg); }
        75% { transform: translateX(5px) rotate(5deg); }
    }

    .pack-shake {
        animation: shake 0.5s ease-in-out;
    }
</style>

<script>
    function handleOpenPack(event) {
        event.preventDefault();
        
        // Add shake animation
        const packImage = document.getElementById('pack-image');
        packImage.classList.add('pack-shake');
        
        // Disable the button to prevent double-clicks
        const button = document.getElementById('open-button');
        button.disabled = true;
        button.classList.add('opacity-50', 'cursor-not-allowed');
        
        // Submit the form after animation
        setTimeout(() => {
            document.getElementById('pack-form').submit();
        }, 600);
    }
</script>
{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-center">Open a Pack</h1>
    
    <div class="bg-white rounded-lg shadow-lg p-6">
        <div class="bg-blue-50 p-4 rounded-md mb-6">
            <h3 class="text-blue-800 font-medium mb-2">What's in a pack?</h3>
            <ul class="text-blue-700 text-sm space-y-2">
                <li>• 1 Rare or Mythic Rare card (15% chance of Mythic)</li>
                <li>• 3 Uncommon cards</li>
                <li>• 6 Common cards</li>
            </ul>
        </div>
        
        <div class="pack-animation mb-6">
            <div id="pack-image" class="pack-image"></div>
        </div>
        
        <form id="pack-form" method="POST" action="/packs" class="text-center">
            <button 
                id="open-button"
                onclick="handleOpenPack(event)"
                class="py-3 px-8 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors inline-block"
            >
                Open Pack
            </button>
        </form>
    </div>
</div>
{% endblock %}